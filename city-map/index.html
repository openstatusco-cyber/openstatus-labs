<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OpenStatus – Your City Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Poppins", sans-serif;
      background: #ffffff;
      color: #232323;
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 24px;
    }

    .shell {
      max-width: 1200px;
      width: 100%;
      border-radius: 32px;
      background: #ffffff;
      box-shadow: 0 24px 70px rgba(0,0,0,0.14);
      overflow: hidden;
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
    }

    @media (max-width: 880px) {
      body { padding: 12px; }
      .shell {
        grid-template-columns: 1fr;
        border-radius: 24px;
      }
    }

    /* Map side */
    .map-side {
      position: relative;
      min-height: 360px;
    }

    #map {
      width: 100%;
      height: 100%;
      min-height: 360px;
    }

    .map-label {
      position: absolute;
      top: 14px;
      left: 14px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.92);
      font-size: 0.78rem;
      box-shadow: 0 8px 18px rgba(0,0,0,0.14);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .map-dot {
      width: 9px;
      height: 9px;
      border-radius: 999px;
      background: #74a36d;
      box-shadow: 0 0 0 3px rgba(116,163,109,0.25);
    }

    /* Text side */
    .text-side {
      padding: 24px 28px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 16px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: #F3F2F2;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .pill span.dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #74a36d;
    }

    .headline {
      font-size: 2.1rem;
      line-height: 1.1;
      min-height: 2.6em; /* space for typewriter text */
    }

    .headline span.city {
      color: #74a36d;
    }

    .subcopy {
      font-size: 0.95rem;
      color: #444;
    }

    .city-line {
      font-size: 0.9rem;
      color: #555;
    }

    .buttons-row {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .btn-store {
      border-radius: 999px;
      border: 1px solid #232323;
      padding: 10px 18px;
      min-width: 190px;
      text-align: center;
      font-size: 0.9rem;
      font-weight: 500;
      background: #ffffff;
      color: #232323;
      text-decoration: none;
      cursor: pointer;
      transition: background 0.15s ease, color 0.15s ease;
    }

    .btn-store:hover {
      background: #232323;
      color: #ffffff;
    }

    .footnote {
      margin-top: 6px;
      font-size: 0.75rem;
      color: #888;
    }

    @media (max-width: 880px) {
      .text-side {
        padding: 20px 18px 22px;
      }
      .headline {
        font-size: 1.7rem;
      }
    }
  </style>
</head>
<body>
  <div class="shell">
    <!-- LEFT: MAP -->
    <div class="map-side">
      <div class="map-label">
        <span class="map-dot"></span>
        <span id="mapLabel">Small businesses around you</span>
      </div>
      <div id="map"></div>
    </div>

    <!-- RIGHT: TEXT -->
    <div class="text-side">
      <div class="pill">
        <span class="dot"></span>
        Built for local explorers & small businesses
      </div>

      <h1 class="headline" id="headline">
        Hey, we love your city.
      </h1>

      <p class="subcopy">
        OpenStatus shows live updates from small businesses in your area – hours, last-minute closures,
        pop-up events, and more – so you always know what’s open before you go.
      </p>

      <p class="city-line" id="cityLine">
        We’ll use your location to find great spots near you.
      </p>

      <div class="buttons-row">
        <a href="#" class="btn-store">Google Play Store</a>
        <a href="#" class="btn-store">Apple App Store</a>
      </div>

      <p class="footnote">
        
      </p>
    </div>
  </div>

  <script>
    let map;
    let geocoder;
    let userLatLng = null;

    function typeWriter(text) {
      const el = document.getElementById("headline");
      el.textContent = "";
      let i = 0;

      function tick() {
        if (i < text.length) {
          el.textContent += text.charAt(i);
          i++;
          setTimeout(tick, 45);
        }
      }
      tick();
    }

    function initMap() {
      // Default center: Franklin-ish
      const defaultCenter = { lat: 35.9253, lng: -86.8689 };

      map = new google.maps.Map(document.getElementById("map"), {
        center: defaultCenter,
        zoom: 10,
        disableDefaultUI: false,
        mapTypeControl: false,
        streetViewControl: false
      });

      geocoder = new google.maps.Geocoder();

      // Try to use browser geolocation
      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(
          (position) => {
            userLatLng = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            centerMapOnUser(userLatLng);
            reverseGeocode(userLatLng);
          },
          () => {
            // Denied or error – keep defaults
            typeWriter("Hey, we love your city.");
          }
        );
      } else {
        typeWriter("Hey, we love your city.");
      }
    }

    function centerMapOnUser(coords) {
      map.setZoom(12);
      map.setCenter(coords);

      new google.maps.Marker({
        position: coords,
        map,
        title: "You’re here",
        icon: {
          path: google.maps.SymbolPath.CIRCLE,
          scale: 8,
          fillColor: "#74a36d",
          fillOpacity: 1,
          strokeWeight: 2,
          strokeColor: "#ffffff"
        }
      });
    }

    function reverseGeocode(coords) {
      if (!geocoder) return;

      geocoder.geocode({ location: coords }, (results, status) => {
        if (status === "OK" && results && results[0]) {
          let city = "";
          let state = "";
          const comps = results[0].address_components;

          comps.forEach((c) => {
            if (c.types.includes("locality")) {
              city = c.long_name;
            }
            if (c.types.includes("administrative_area_level_1")) {
              state = c.short_name;
            }
          });

          const cityState = city && state ? `${city}, ${state}` :
                             city || state || "your area";

          document.getElementById("cityLine").textContent =
            `Right now we’re looking around ${cityState} for small businesses.`;

          document.getElementById("mapLabel").textContent =
            `Small businesses around ${cityState}`;

          typeWriter(`Hey, we love your city, ${cityState}.`);
        } else {
          typeWriter("Hey, we love your city.");
        }
      });
    }
  </script>

  <!-- Google Maps JS with your key -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBF7OU8d3VUhHYElrNxCnnaTXnTHRsPnz0&callback=initMap" async defer></script>
</body>
</html>
