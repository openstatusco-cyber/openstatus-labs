<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OpenStatus Labs ‚Äì Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="OpenStatus Labs sandbox ‚Äì testing live maps and local business discovery." />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Poppins", sans-serif;
      background: #F3F2F2;
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 24px;
      color: #232323;
    }

    .shell {
      max-width: 1120px;
      width: 100%;
      background: #ffffff;
      border-radius: 32px;
      box-shadow: 0 24px 70px rgba(0, 0, 0, 0.16);
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.4fr);
      overflow: hidden;
    }

    @media (max-width: 900px) {
      body {
        padding: 12px;
      }
      .shell {
        grid-template-columns: 1fr;
        border-radius: 24px;
      }
    }

    .left {
      padding: 24px 24px 20px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      background: linear-gradient(180deg, #fff2c1 0%, #ffffff 35%, #ffffff 100%);
    }

    .logo-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .logo-text {
      font-weight: 700;
      letter-spacing: 0.04em;
      font-size: 0.8rem;
      text-transform: uppercase;
    }

    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(116, 163, 109, 0.12);
      font-size: 0.76rem;
      color: #2f5c34;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #74a36d;
      box-shadow: 0 0 0 6px rgba(116, 163, 109, 0.22);
    }

    .hero-text h1 {
      font-size: 1.9rem;
      line-height: 1.1;
      margin-bottom: 6px;
    }

    .hero-text p {
      font-size: 0.9rem;
      color: #555;
    }

    .search-row {
      margin-top: 4px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .search-input {
      flex: 1;
      min-width: 0;
      background: #F3F2F2;
      border-radius: 999px;
      padding: 8px 12px;
      border: 1px solid #e0dfdf;
      font-size: 0.86rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .search-input input {
      border: none;
      outline: none;
      background: transparent;
      font-size: 0.86rem;
      width: 100%;
    }

    .btn-main {
      border-radius: 999px;
      border: none;
      padding: 8px 14px;
      font-size: 0.86rem;
      font-weight: 600;
      background: #232323;
      color: #ffffff;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .btn-main span.icon {
      font-size: 1rem;
    }

    .chips-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;
    }

    .chip {
      font-size: 0.76rem;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #e1e1e1;
      background: #ffffff;
      cursor: pointer;
    }

    .chip.active {
      background: #74a36d;
      color: #ffffff;
      border-color: #74a36d;
    }

    .list-header {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.8rem;
      color: #777;
    }

    .list-header strong {
      color: #232323;
    }

    .business-list {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding-right: 4px;
      overflow-y: auto;
      max-height: 320px;
    }

    .card {
      display: grid;
      grid-template-columns: 80px minmax(0, 1fr);
      gap: 10px;
      border-radius: 16px;
      padding: 8px;
      background: #ffffff;
      border: 1px solid #ececec;
      box-shadow: 0 6px 16px rgba(0,0,0,0.04);
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease;
    }

    .card:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 26px rgba(0,0,0,0.08);
      border-color: #ddd;
    }

    .card.active {
      border-color: #74a36d;
      box-shadow: 0 12px 30px rgba(116,163,109,0.25);
    }

    .card-image {
      border-radius: 12px;
      background: linear-gradient(135deg, #fff2c1, #F8AE9D, #b4c1ef);
      position: relative;
      overflow: hidden;
    }

    .card-image span {
      position: absolute;
      bottom: 6px;
      left: 8px;
      font-size: 0.7rem;
      color: #232323;
      font-weight: 600;
      background: rgba(255,255,255,0.9);
      padding: 2px 6px;
      border-radius: 999px;
    }

    .card-body {
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0;
    }

    .card-title-row {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      align-items: center;
    }

    .card-title {
      font-size: 0.9rem;
      font-weight: 600;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    .open-pill {
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: #e5f4e6;
      color: #205328;
      white-space: nowrap;
    }

    .meta-row {
      font-size: 0.76rem;
      color: #777;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 2px;
    }

    .tag {
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 999px;
      background: #F3F2F2;
      color: #555;
    }

    .tag.green {
      background: rgba(116,163,109,0.16);
      color: #29542f;
    }

    .updated {
      font-size: 0.7rem;
      color: #999;
      margin-top: 2px;
    }

    .right {
      background: radial-gradient(circle at 0% 0%, #fff2c1, #F8AE9D 40%, #b4c1ef 100%);
      padding: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .phone-shell {
      width: 100%;
      max-width: 420px;
      background: #ffffff;
      border-radius: 32px;
      padding: 10px;
      box-shadow: 0 18px 50px rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.6);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .phone-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.78rem;
      color: #666;
      padding: 0 2px;
    }

    .phone-top-location {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .phone-top-location span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #74a36d;
    }

    .phone-top-filter {
      font-size: 0.72rem;
      background: #F3F2F2;
      border-radius: 999px;
      padding: 3px 8px;
    }

    .map-wrap {
      border-radius: 24px;
      overflow: hidden;
      border: 1px solid #e0dfdf;
      height: 340px;
      background: #F3F2F2;
    }

    #map {
      width: 100%;
      height: 100%;
    }

    .phone-bottom {
      font-size: 0.72rem;
      color: #777;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 2px 2px;
    }

    .live-pill {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 3px 8px;
      border-radius: 999px;
      background: #232323;
      color: #ffffff;
    }

    .live-pill span.blink {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #74a36d;
      animation: pulse 1.4s ease-in-out infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.6); opacity: 0.25; }
      100% { transform: scale(1); opacity: 0.8; }
    }
  </style>
</head>
<body>
  <main class="shell">
    <section class="left">
      <div class="logo-row">
        <div class="logo-text">OpenStatus Labs</div>
        <div class="status-pill">
          <span class="status-dot"></span>
          Live small business map
        </div>
      </div>

      <div class="hero-text">
        <h1>Know what‚Äôs open before you go.</h1>
        <p>Apple-clean design. Yelp-style discovery. Powered by your OpenStatus live updates.</p>
      </div>

      <div class="search-row">
        <div class="search-input">
          <span>üîç</span>
          <input id="searchInput" type="text" placeholder="Search coffee, tacos, salons‚Ä¶" />
        </div>
        <button class="btn-main" onclick="focusSearch()">
          <span class="icon">üß≠</span>
          Near me
        </button>
      </div>

      <div class="chips-row" id="chipsRow">
        <button class="chip active" data-filter="all">All</button>
        <button class="chip" data-filter="Cafe">Cafes</button>
        <button class="chip" data-filter="Restaurant">Food</button>
        <button class="chip" data-filter="Shop">Shops</button>
        <button class="chip" data-filter="Event">Events</button>
      </div>

      <div class="list-header">
        <span><strong id="resultsCount">3</strong> spots in Franklin</span>
        <span>Tap a card to jump on the map ‚Üí</span>
      </div>

      <div class="business-list" id="businessList"></div>
    </section>

    <section class="right">
      <div class="phone-shell">
        <div class="phone-top">
          <div class="phone-top-location">
            <span class="dot"></span>
            <span id="topLocationLabel">Franklin, TN</span>
          </div>
          <div class="phone-top-filter">Open now ¬∑ Verified</div>
        </div>

        <div class="map-wrap">
          <div id="map"></div>
        </div>

        <div class="phone-bottom">
          <div class="live-pill">
            <span class="blink"></span>
            Live updates
          </div>
          <span id="updateLabel">Last refresh: just now</span>
        </div>
      </div>
    </section>
  </main>

  <script>
    const PLACES = [
      {
        id: 1,
        name: "Froth & Friends Coffee Cart",
        category: "Cafe",
        cityLabel: "Franklin, TN",
        status: "Open now",
        updated: "Updated 3 min ago",
        distance: "0.4 mi",
        price: "$$",
        tags: ["Coffee", "Pastries", "Walk-up"],
        featuredTag: "Local favorite",
        lat: 35.9253,
        lng: -86.8689,
        color: "#74a36d"
      },
      {
        id: 2,
        name: "Downtown Taco Lane",
        category: "Restaurant",
        cityLabel: "Franklin, TN",
        status: "Open now",
        updated: "Updated 8 min ago",
        distance: "0.9 mi",
        price: "$",
        tags: ["Tacos", "Late-night", "Takeout"],
        featuredTag: "Food truck",
        lat: 35.9241,
        lng: -86.8735,
        color: "#F8AE9D"
      },
      {
        id: 3,
        name: "Riverbend Plant Shop",
        category: "Shop",
        cityLabel: "Franklin, TN",
        status: "Closes soon",
        updated: "Updated 20 min ago",
        distance: "1.3 mi",
        price: "$$",
        tags: ["Plants", "Gifts", "Local"],
        featuredTag: "Verified on OpenStatus",
        lat: 35.9278,
        lng: -86.8652,
        color: "#b4c1ef"
      }
    ];

    let map;
    let markers = [];
    let activePlaceId = null;

    function initMap() {
      const center = { lat: 35.9253, lng: -86.8689 };

      map = new google.maps.Map(document.getElementById("map"), {
        center,
        zoom: 14,
        disableDefaultUI: true,
        gestureHandling: "greedy",
        styles: [
          {
            featureType: "all",
            elementType: "geometry",
            stylers: [{ color: "#F3F2F2" }]
          },
          {
            featureType: "poi",
            elementType: "labels.text.fill",
            stylers: [{ color: "#757575" }]
          },
          {
            featureType: "road",
            elementType: "geometry",
            stylers: [{ color: "#ffffff" }]
          },
          {
            featureType: "road",
            elementType: "labels.text.fill",
            stylers: [{ color: "#616161" }]
          },
          {
            featureType: "water",
            elementType: "geometry",
            stylers: [{ color: "#d2e3fc" }]
          }
        ]
      });

      renderList();
      placeMarkers();
    }

    function placeMarkers() {
      markers.forEach(m => m.setMap(null));
      markers = [];

      const visiblePlaces = getFilteredPlaces();

      visiblePlaces.forEach((place, index) => {
        const marker = new google.maps.Marker({
          position: { lat: place.lat, lng: place.lng },
          map,
          title: place.name,
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            scale: 9,
            fillColor: place.color || "#74a36d",
            fillOpacity: 1,
            strokeWeight: 2,
            strokeColor: "#ffffff"
          },
          zIndex: 10 + index
        });

        marker.addListener("click", () => {
          scrollToCard(place.id);
          setActivePlace(place.id);
        });

        markers.push({ marker, placeId: place.id });
      });

      if (visiblePlaces.length) {
        map.panTo({ lat: visiblePlaces[0].lat, lng: visiblePlaces[0].lng });
      }

      document.getElementById("resultsCount").textContent = visiblePlaces.length;
    }

    function renderList() {
      const listEl = document.getElementById("businessList");
      listEl.innerHTML = "";

      const visiblePlaces = getFilteredPlaces();

      visiblePlaces.forEach(place => {
        const card = document.createElement("article");
        card.className = "card";
        card.dataset.id = String(place.id);

        card.innerHTML = `
          <div class="card-image">
            <span>${place.featuredTag || place.category}</span>
          </div>
          <div class="card-body">
            <div class="card-title-row">
              <div class="card-title">${place.name}</div>
              <div class="open-pill">${place.status}</div>
            </div>
            <div class="meta-row">
              <span>${place.category}</span>
              <span>‚Ä¢</span>
              <span>${place.distance}</span>
              <span>‚Ä¢</span>
              <span>${place.price}</span>
            </div>
            <div class="tag-row">
              ${place.tags.map(t => `<span class="tag">${t}</span>`).join("")}
              <span class="tag green">Live</span>
            </div>
            <div class="updated">${place.updated}</div>
          </div>
        `;

        card.addEventListener("click", () => {
          setActivePlace(place.id, true);
        });

        listEl.appendChild(card);
      });
    }

    function getFilteredPlaces() {
      const search = (document.getElementById("searchInput").value || "").toLowerCase();
      const activeChip = document.querySelector(".chip.active");
      const filter = activeChip ? activeChip.dataset.filter : "all";

      return PLACES.filter(place => {
        const matchesFilter = filter === "all" || place.category === filter;
        const matchesSearch =
          !search ||
          place.name.toLowerCase().includes(search) ||
          place.tags.some(t => t.toLowerCase().includes(search));

        return matchesFilter && matchesSearch;
      });
    }

    function setActivePlace(placeId, panMap = false) {
      activePlaceId = placeId;

      const cards = document.querySelectorAll(".card");
      cards.forEach(card => {
        card.classList.toggle("active", card.dataset.id === String(placeId));
      });

      const place = PLACES.find(p => p.id === placeId);
      if (place) {
        document.getElementById("topLocationLabel").textContent = place.cityLabel || "Franklin, TN";
        document.getElementById("updateLabel").textContent = place.updated;
      }

      if (panMap && map) {
        const markerObj = markers.find(m => m.placeId === placeId);
        if (markerObj) {
          map.panTo(markerObj.marker.getPosition());
          map.setZoom(15);
        }
      }
    }

    function scrollToCard(placeId) {
      const card = document.querySelector(`.card[data-id="${placeId}"]`);
      const listEl = document.getElementById("businessList");
      if (card && listEl) {
        const top = card.offsetTop - 8;
        listEl.scrollTo({ top, behavior: "smooth" });
      }
    }

    function focusSearch() {
      document.getElementById("searchInput").focus();
    }

    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("chipsRow").addEventListener("click", (event) => {
        const target = event.target;
        if (target.classList.contains("chip")) {
          document.querySelectorAll(".chip").forEach(chip => chip.classList.remove("active"));
          target.classList.add("active");
          renderList();
          placeMarkers();
        }
      });

      document.getElementById("searchInput").addEventListener("input", () => {
        renderList();
        placeMarkers();
      });

      if (PLACES.length) {
        setActivePlace(PLACES[0].id);
      }
    });
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBF7OU8d3VUhHYElrNxCnnaTXnTHRsPnz0&callback=initMap" async defer></script>
</body>
</html>
